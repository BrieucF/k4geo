<?xml version="1.0" encoding="UTF-8"?>
<lccdd>

  <define>

     <!---                            PreShower                     -->
      
     <constant name = "PS_BarrelInnerRadius"                          value = "2440*mm"/>  <!--Barrel envelope inner radius...it's a approximation...overlap check!!? -->
      <constant name = "PS_BarrelOuterRadius"                          value = "2490*mm"/>  <!--Barrel envelope outer radius...overlap. -->
        <constant name = "PS_BarrelFirstLayerRadius"                 value = "2450*mm"/>  <!-- 1st Barrel microRWELL detector inner radius-> its the start point of thicknesses of the microRWELL material-->      
        <constant name = "PS_BarrelLength"                           value = "5100*mm"/> <!--Barrel detector length, in the description of the detctor we always use the half-length, Barrel's only layer, should be longer than the other layers to cover the endcap areas-->
     <!-- ////////////     End cap      ////////////// -->   
      <constant name = "PS_EndcapInnerRadius"                          value = "375*mm"/>  <!--Endcap envelope inner radius///diff. by 15 Rin...overlap..Z -->
      <constant name = "PS_EndcapOuterRadius"                          value = "2435*mm"/> <!--Endcap envelope outer radius..diff by 20 Rout -->
       <constant name = "PS_EndcapLayersInnerRadius"                    value = "390*mm"/> <!--Endcap detector inner radius, its the start point of thicknesses of the detector material -->
       <constant name = "PS_EndcapLayersOuterRadius"                    value = "2430*mm"/> <!--Endcap detector outer radius, its the end point of thicknesses of the detector material -->
      <constant name = "PS_EndcapLength"                               value = "60*mm"/>
     <constant name = "PS_EndcapZOffset"                              value = "2580*mm"/> 
    <!--    <constant name = "PS_EndcapZOffset"                              value = "2550+30*mm"/>  The offset is = the barrel halflength"2550" + the endcap volume halflength"??380". So, its centered at the middle of the endcap volume-->      
     <constant name = "PS_microRWELLVolumeThick"                      value = "40*mm"/> <!--20+20 The thickness of the detector layer including the microRWELL material and the spacing between the layers too -->


     <!-- %%%%%%                      microRWELL chamber different layers thicknesses                %%%%%% -->

       <constant name = "PS_G10_FR4Thick"                          value = "1.6*mm"/>
       <constant name = "PS_CuThick"                               value = "0.035*mm"/>
       <constant name = "PS_GasLayerThick"                         value = "6*mm"/>
       <constant name = "PS_Cu2Thick"                              value = "0.005*mm"/>
       <constant name = "PS_KaptonThick"                           value = "0.05*mm"/>
       <constant name = "PS_CarnonFiberThick"                      value = "0.0001*mm"/>
       <constant name = "PS_CarbonFiber2Thick"                     value = "0.1*mm"/>
       <constant name = "PS_SiThick"                               value = "1.6*mm"/>


  </define>   


  <readouts>
   <readout name="PreShowerBarrelReadout">  
      <segmentation type="ProjectiveCylinder" phi_bins="1538" theta_bins="510"/>   <!-- Depending on cell size 1cm*1cm  -->
  <!--    <id>system:4,layer:1,theta:10,phi:-12</id> -->
            <id>system:4,layer:1,theta:9,phi:-11</id>
    </readout>

    <readout name="PreShowerPositiveEndcapReadout">
      <segmentation type="ProjectiveCylinder" phi_bins="1500" theta_bins="900"/>  <!-- approximation phi theta...for now!  -->
      <id>system:4,layer:1,theta:9,phi:-11</id>
    </readout>

    <readout name="PreShowerNegativeEndcapReadout">
      <segmentation type="ProjectiveCylinder" phi_bins="1500" theta_bins="900"/>
      <id>system:4,layer:1,theta:9,phi:-11</id>
    </readout>
  </readouts>

  <detectors>

    <!-- B A R R E L S -->
    <detector name="PreShowerBarrel" type="SimpleSensitiveLayeredCylinder_o1_v00"  vis=" MuonVis " id="DetID_PreShower_Barrel" readout="PreShowerBarrelReadout">
      <dimensions rmin="PS_BarrelInnerRadius" rmax="PS_BarrelOuterRadius" dz="PS_BarrelLength/2.0" z_offset="0*cm" material="Air" />
      <sensitive type="SimpleTrackerSD"/>
      <!-- 1st & only mRWELL layer -->

      <layer rmin="PS_BarrelFirstLayerRadius" rmax="PS_BarrelFirstLayerRadius+PS_G10_FR4Thick" dz="PS_BarrelLength/2.0" z_offset="0*cm" material="G10_FR40x5633439ca570" vis="MuonVis" />
      <layer rmin="PS_BarrelFirstLayerRadius+PS_G10_FR4Thick" rmax="PS_BarrelFirstLayerRadius+PS_G10_FR4Thick+PS_CuThick" dz="PS_BarrelLength/2.0" z_offset="0*cm" material="G4_Cu"  vis="MuonVis" />
      <layer rmin="PS_BarrelFirstLayerRadius+PS_G10_FR4Thick+PS_CuThick" rmax="PS_BarrelFirstLayerRadius+PS_G10_FR4Thick+PS_CuThick+PS_GasLayerThick" dz="PS_BarrelLength/2.0" z_offset="0*cm" material="ARCO2CF4" sensitive="true" vis="MuonVis" />
      <layer rmin="PS_BarrelFirstLayerRadius+PS_G10_FR4Thick+PS_CuThick+PS_GasLayerThick" rmax="PS_BarrelFirstLayerRadius+PS_G10_FR4Thick+PS_CuThick+PS_GasLayerThick+PS_Cu2Thick" dz="PS_BarrelLength/2.0" z_offset="0*cm" material="G4_Cu"  vis="MuonVis" />
      <layer rmin="PS_BarrelFirstLayerRadius+PS_G10_FR4Thick+PS_CuThick+PS_GasLayerThick+PS_Cu2Thick" rmax="PS_BarrelFirstLayerRadius+PS_G10_FR4Thick+PS_CuThick+PS_GasLayerThick+PS_Cu2Thick+PS_KaptonThick" dz="PS_BarrelLength/2.0" z_offset="0*cm" material="Kapton" vis="MuonVis" />
      <layer rmin="PS_BarrelFirstLayerRadius+PS_G10_FR4Thick+PS_CuThick+PS_GasLayerThick+PS_Cu2Thick+PS_KaptonThick" rmax="PS_BarrelFirstLayerRadius+PS_G10_FR4Thick+PS_CuThick+PS_GasLayerThick+PS_Cu2Thick+PS_KaptonThick+PS_CarnonFiberThick" dz="PS_BarrelLength/2.0" z_offset="0*cm" material="CarbonFiber" vis="   " />
      <layer rmin="PS_BarrelFirstLayerRadius+PS_G10_FR4Thick+PS_CuThick+PS_GasLayerThick+PS_Cu2Thick+PS_KaptonThick+PS_CarnonFiberThick" rmax="PS_BarrelFirstLayerRadius+PS_G10_FR4Thick+PS_CuThick+PS_GasLayerThick+PS_Cu2Thick+PS_KaptonThick+PS_CarnonFiberThick+PS_CuThick" dz="PS_BarrelLength/2.0" z_offset="0*cm" material="G4_Cu"  vis="MuonVis" />
      <layer rmin="PS_BarrelFirstLayerRadius+PS_G10_FR4Thick+PS_CuThick+PS_GasLayerThick+PS_Cu2Thick+PS_KaptonThick+PS_CarnonFiberThick+PS_CuThick" rmax="PS_BarrelFirstLayerRadius+PS_G10_FR4Thick+PS_CuThick+PS_GasLayerThick+PS_Cu2Thick+PS_KaptonThick+PS_CarnonFiberThick+PS_CuThick+PS_CarbonFiber2Thick" dz="PS_BarrelLength/2.0" z_offset="0*cm" material="CarbonFiber" vis="MuonVis" />
      <layer rmin="PS_BarrelFirstLayerRadius+PS_G10_FR4Thick+PS_CuThick+PS_GasLayerThick+PS_Cu2Thick+PS_KaptonThick+PS_CarnonFiberThick+PS_CuThick+PS_CarbonFiber2Thick" rmax="PS_BarrelFirstLayerRadius+PS_G10_FR4Thick+PS_CuThick+PS_GasLayerThick+PS_Cu2Thick+PS_KaptonThick+PS_CarnonFiberThick+PS_CuThick+PS_CarbonFiber2Thick+PS_CuThick" dz="PS_BarrelLength/2.0" z_offset="0*cm" material="G4_Cu"  vis="MuonVis" />
      <layer rmin="PS_BarrelFirstLayerRadius+PS_G10_FR4Thick+PS_CuThick+PS_GasLayerThick+PS_Cu2Thick+PS_KaptonThick+PS_CarnonFiberThick+PS_CuThick+PS_CarbonFiber2Thick+PS_CuThick" rmax="PS_BarrelFirstLayerRadius+PS_G10_FR4Thick+PS_CuThick+PS_GasLayerThick+PS_Cu2Thick+PS_KaptonThick+PS_CarnonFiberThick+PS_CuThick+PS_CarbonFiber2Thick+PS_CuThick+PS_SiThick" dz="PS_BarrelLength/2.0" z_offset="0*cm" material="G4_Si0x56335d3d1480" vis="MuonVis" />
    
       </detector>

    <!-- Positve E n d C a p - -->
    <detector name="PreShowerPositiveEndcap" type="SimpleSensitiveLayeredCylinder_o1_v00"  vis="MuonVisEnv" id="DetID_PreShower_Positive_Endcap" readout="PreShowerPositiveEndcapReadout">
      <sensitive type="SimpleTrackerSD"/>
      <dimensions rmin="PS_EndcapInnerRadius" rmax="PS_EndcapOuterRadius" dz="PS_EndcapLength/2.0" z_offset="PS_EndcapZOffset" material="Air"/>
      <!-- 1st Endcap mRWELL layer -->
      <layer rmin="PS_EndcapLayersInnerRadius" rmax="PS_EndcapLayersOuterRadius" dz="PS_G10_FR4Thick/2.0" z_offset="PS_microRWELLVolumeThick+PS_G10_FR4Thick/2.0" material="G10_FR40x5633439ca570" vis="MuonVis" />
      <layer rmin="PS_EndcapLayersInnerRadius" rmax="PS_EndcapLayersOuterRadius" dz="PS_CuThick/2.0" z_offset="PS_microRWELLVolumeThick+PS_G10_FR4Thick+PS_CuThick/2.0" material="G4_Cu"  vis="MuonVis" />
      <layer rmin="PS_EndcapLayersInnerRadius" rmax="PS_EndcapLayersOuterRadius" dz="PS_GasLayerThick/2.0" z_offset="PS_microRWELLVolumeThick+PS_G10_FR4Thick+PS_CuThick+PS_GasLayerThick/2.0" material="ARCO2CF4" sensitive="true" vis="MuonVis" />
      <layer rmin="PS_EndcapLayersInnerRadius" rmax="PS_EndcapLayersOuterRadius" dz="PS_Cu2Thick/2.0" z_offset="PS_microRWELLVolumeThick+PS_G10_FR4Thick+PS_CuThick+PS_GasLayerThick+PS_Cu2Thick/2.0" material="G4_Cu"  vis="MuonVis" />
      <layer rmin="PS_EndcapLayersInnerRadius" rmax="PS_EndcapLayersOuterRadius" dz="PS_KaptonThick/2.0" z_offset="PS_microRWELLVolumeThick+PS_G10_FR4Thick+PS_CuThick+PS_GasLayerThick+PS_Cu2Thick+PS_KaptonThick/2.0" material="Kapton" vis="MuonVis" />
      <layer rmin="PS_EndcapLayersInnerRadius" rmax="PS_EndcapLayersOuterRadius" dz="PS_CarnonFiberThick/2.0" z_offset="PS_microRWELLVolumeThick+PS_G10_FR4Thick+PS_CuThick+PS_GasLayerThick+PS_Cu2Thick+PS_KaptonThick+PS_CarnonFiberThick/2.0" material="CarbonFiber" vis="MuonVis" />
      <layer rmin="PS_EndcapLayersInnerRadius" rmax="PS_EndcapLayersOuterRadius" dz="PS_CuThick/2.0" z_offset="PS_microRWELLVolumeThick+PS_G10_FR4Thick+PS_CuThick+PS_GasLayerThick+PS_Cu2Thick+PS_KaptonThick+PS_CarnonFiberThick+PS_CuThick/2.0" material="G4_Cu"  vis="MuonVis" />
      <layer rmin="PS_EndcapLayersInnerRadius" rmax="PS_EndcapLayersOuterRadius" dz="PS_CarbonFiber2Thick/2.0" z_offset="PS_microRWELLVolumeThick+PS_G10_FR4Thick+PS_CuThick+PS_GasLayerThick+PS_Cu2Thick+PS_KaptonThick+PS_CarnonFiberThick+PS_CuThick+PS_CarbonFiber2Thick/2.0" material="CarbonFiber" vis="MuonVis" />
      <layer rmin="PS_EndcapLayersInnerRadius" rmax="PS_EndcapLayersOuterRadius" dz="PS_CuThick/2.0" z_offset="PS_microRWELLVolumeThick+PS_G10_FR4Thick+PS_CuThick+PS_GasLayerThick+PS_Cu2Thick+PS_KaptonThick+PS_CarnonFiberThick+PS_CuThick+PS_CarbonFiber2Thick+PS_CuThick/2.0" material="G4_Cu"  vis="MuonVis" />
      <layer rmin="PS_EndcapLayersInnerRadius" rmax="PS_EndcapLayersOuterRadius" dz="PS_SiThick/2.0" z_offset="PS_microRWELLVolumeThick+PS_G10_FR4Thick+PS_CuThick+PS_GasLayerThick+PS_Cu2Thick+PS_KaptonThick+PS_CarnonFiberThick+PS_CuThick+PS_CarbonFiber2Thick+PS_CuThick+PS_SiThick/2.0" material="G4_Si0x56335d3d1480" vis="MuonVis" />
   
   
    </detector>


    <!-- Negative E n d C a p -->
    <detector name="PreShowerNegativeEndcap" type="SimpleSensitiveLayeredCylinder_o1_v00"  vis="MuonVisEnv" id="DetID_PreShower_Negative_Endcap" readout="PreShowerNegativeEndcapReadout">
      <sensitive type="SimpleTrackerSD"/>
      <dimensions rmin="PS_EndcapInnerRadius" rmax="PS_EndcapOuterRadius" dz="PS_EndcapLength/2.0" z_offset="-PS_EndcapZOffset" material="Air"/>

      <!-- 1st Endcap mRWELL layer -->
      <layer rmin="PS_EndcapLayersInnerRadius" rmax="PS_EndcapLayersOuterRadius" dz="PS_G10_FR4Thick/2.0" z_offset="-PS_microRWELLVolumeThick+PS_G10_FR4Thick/2.0" material="G10_FR40x5633439ca570" vis="MuonVis" />
      <layer rmin="PS_EndcapLayersInnerRadius" rmax="PS_EndcapLayersOuterRadius" dz="PS_CuThick/2.0" z_offset="-PS_microRWELLVolumeThick+PS_G10_FR4Thick+PS_CuThick/2.0" material="G4_Cu"  vis="MuonVis" />
      <layer rmin="PS_EndcapLayersInnerRadius" rmax="PS_EndcapLayersOuterRadius" dz="PS_GasLayerThick/2.0" z_offset="-PS_microRWELLVolumeThick+PS_G10_FR4Thick+PS_CuThick+PS_GasLayerThick/2.0" material="ARCO2CF4" sensitive="true" vis="MuonVis" />
      <layer rmin="PS_EndcapLayersInnerRadius" rmax="PS_EndcapLayersOuterRadius" dz="PS_Cu2Thick/2.0" z_offset="-PS_microRWELLVolumeThick+PS_G10_FR4Thick+PS_CuThick+PS_GasLayerThick+PS_Cu2Thick/2.0" material="G4_Cu"  vis="MuonVis" />
      <layer rmin="PS_EndcapLayersInnerRadius" rmax="PS_EndcapLayersOuterRadius" dz="PS_KaptonThick/2.0" z_offset="-PS_microRWELLVolumeThick+PS_G10_FR4Thick+PS_CuThick+PS_GasLayerThick+PS_Cu2Thick+PS_KaptonThick/2.0" material="Kapton" vis="MuonVis" />
      <layer rmin="PS_EndcapLayersInnerRadius" rmax="PS_EndcapLayersOuterRadius" dz="PS_CarnonFiberThick/2.0" z_offset="-PS_microRWELLVolumeThick+PS_G10_FR4Thick+PS_CuThick+PS_GasLayerThick+PS_Cu2Thick+PS_KaptonThick+PS_CarnonFiberThick/2.0" material="CarbonFiber" vis="MuonVis" />
      <layer rmin="PS_EndcapLayersInnerRadius" rmax="PS_EndcapLayersOuterRadius" dz="PS_CuThick/2.0" z_offset="-PS_microRWELLVolumeThick+PS_G10_FR4Thick+PS_CuThick+PS_GasLayerThick+PS_Cu2Thick+PS_KaptonThick+PS_CarnonFiberThick+PS_CuThick/2.0" material="G4_Cu"  vis="MuonVis" />
      <layer rmin="PS_EndcapLayersInnerRadius" rmax="PS_EndcapLayersOuterRadius" dz="PS_CarbonFiber2Thick/2.0" z_offset="-PS_microRWELLVolumeThick+PS_G10_FR4Thick+PS_CuThick+PS_GasLayerThick+PS_Cu2Thick+PS_KaptonThick+PS_CarnonFiberThick+PS_CuThick+PS_CarbonFiber2Thick/2.0" material="CarbonFiber" vis="MuonVis" />
      <layer rmin="PS_EndcapLayersInnerRadius" rmax="PS_EndcapLayersOuterRadius" dz="PS_CuThick/2.0" z_offset="-PS_microRWELLVolumeThick+PS_G10_FR4Thick+PS_CuThick+PS_GasLayerThick+PS_Cu2Thick+PS_KaptonThick+PS_CarnonFiberThick+PS_CuThick+PS_CarbonFiber2Thick+PS_CuThick/2.0" material="G4_Cu"  vis="MuonVis" />
      <layer rmin="PS_EndcapLayersInnerRadius" rmax="PS_EndcapLayersOuterRadius" dz="PS_SiThick/2.0" z_offset="-PS_microRWELLVolumeThick+PS_G10_FR4Thick+PS_CuThick+PS_GasLayerThick+PS_Cu2Thick+PS_KaptonThick+PS_CarnonFiberThick+PS_CuThick+PS_CarbonFiber2Thick+PS_CuThick+PS_SiThick/2.0" material="G4_Si0x56335d3d1480" vis="MuonVis" />

    </detector>

  </detectors>

</lccdd>
